<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <title>任务列表 | Wanted</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-siteapp"/>
    <!-- Bootstrap core CSS -->
    <link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="bootstrap/css/dashboard.css" rel="stylesheet">
    <!-- AmazeUI-->
    <link rel="alternate icon" type="image/png" href="assets/i/favicon.png">
    <link rel="stylesheet" href="assets/css/amazeui.css"/>
    <link rel="stylesheet" href="assets/css/landing.css"/>
  <style>
      .menban{
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        background-color: #000;
        opacity: 0.5;
        z-index: 1111;
        display: none;
      }
      .modal {
        z-index: 2000;
      }
      a,a:hover{
        color: #f46;
        text-decoration: none;
      }
      .am-topbar-right a,a:hover{
        color: #fff;
        text-decoration: none;
      }
    </style>
</head>
<body>
    <div class="menban"></div>
    <header class="am-topbar am-topbar-fixed-top">
      <div class="am-container">
        <h1 class="am-topbar-brand" >
          <a class="title" href="index.html">Wanted</a>
        </h1>

        <button class="am-topbar-btn am-topbar-toggle am-btn am-btn-sm am-btn-secondary am-show-sm-only"
                data-am-collapse="{target: '#collapse-head'}"><span class="am-sr-only">导航切换</span> <span
            class="am-icon-bars"></span></button>

        <div class="am-collapse am-topbar-collapse" id="collapse-head">
          <ul class="am-nav am-nav-pills am-topbar-nav">
            <li class="am-active"><a href="landing.html">任务列表</a></li>
            <li><a href="mycenter.html">个人中心</a></li>
          </ul>
          <div class="am-topbar-right">
            <a href="index.html">
              <button class="am-btn am-btn-primary am-topbar-btn am-btn-sm"><span class="am-icon-user"></span> 登出</button>
            </a>
          </div>

          <div class="am-topbar-right">
            <a href="post.html">
              <button class="am-btn am-btn-secondary am-topbar-btn am-btn-sm"><span class="am-icon-pencil"></span>发布任务</button>
            </a>
          </div>

        </div>
      </div>
    </header>

    <div class="container-fluid">
      <div class="am-g">
        <div class="am-u-sm-9 am-u-sm-centered">
          <h1 class="page-header">任务列表</h1>
          <div class="search-condition">
            <label class="am-radio-inline am-danger">
              <input type="radio" name="radio1" checked="checked" value="0" data-am-ucheck checked>待接收
            </label>
            <label class="am-radio-inline am-danger">
              <input type="radio" name="radio1" value="1" data-am-ucheck>失效
            </label>
            <label class="am-radio-inline am-danger">
              <input type="radio" name="radio1" value="2" data-am-ucheck>
              已接收
            </label>
            <label class="am-radio-inline am-danger">
              <input type="radio" name="radio1" value="3" data-am-ucheck>已完成
            </label>
            <label class="am-radio-inline am-danger">
              <input type="radio" name="radio1" value="4" data-am-ucheck>
              失败
            </label>
          </div>
          <h2 class="page-header">查询结果</h2>
          <div class="table-responsive" id="table_result">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>任务状态</th>
                  <th>任务概述</th>
                  <th>任务悬赏</th>
                  <th>截止日期</th>
                </tr>
              </thead>
              <tbody id='tbody'>
                <tr>
                  <td>待接收</td>
                  <td>30舍求取快递</td>
                  <td>请吃饭</td>
                  <td>2015-11-22下午06:00</td>
                  <td><a href="#" class="trigger-modal" id="1">查看详情</a></td>
                </tr>
                <tr>
                  <td>待接收</td>
                  <td>yq去zjg求陪同</td>
                  <td>无</td>
                  <td>2015-11-25上午08:00</td>
                  <td><a href="#" class="trigger-modal" id="2">查看详情</a></td>
                </tr>
                <tr>
                  <td>待接收</td>
                  <td>名人名家约饭</td>
                  <td>无</td>
                  <td>2015-11-22上午12:00</td>
                  <td><a href="#" class="trigger-modal" id="2">查看详情</a></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <div class="modal" id="mymodal">  
        <div class="modal-dialog">  
            <div class="modal-content">  
                <div class="modal-header">  
                    <button type="button" class="close" name="close" data-dismiss="modal"><span aria-hidden="true">×</span><span class="sr-only">Close</span></button>  
                    <h4 class="modal-title">悬赏令</h4>  
                </div>  
                <div class="modal-body">  
                    <form class="form-signin" style="max-width: 660px;  padding: 10px;">
                      <label for="Title" class="">标题</label>
                      <p id="Addr">玉泉30舍求帮取快递</p>        
                      <label for="Addr" class="">地点</label>
                      <p id="Addr">玉泉校区</p>
                      <label for="Reword" class="">悬赏</label>
                      <p id="Reword">请吃饭</p>
                      <label for="Time" class="">截止时间</label>
                      <p id="Time">2015-11-22 下午06:00</p>
                      <label for="Description" class="">具体描述</label>
                      <p id="Time">今天下午六点前，求帮取快递。取完请你吃饭，多谢～</p>
                    </form>  
                </div>  
                <div class="modal-footer">  
                    <button type="button" class="btn btn-default" name="close" data-dismiss="modal" id="btn-close">关闭</button>  
                    <button type="button" class="btn btn-primary" style="background-color: #f46;border-color: #f46;" id="btn-receive" data-dismiss="modal" >接收</button>  
                </div>  
            </div><!-- /.modal-content -->  
        </div><!-- /.modal-dialog -->  
    </div><!-- /.modal -->


<!--[if (gte IE 9)|!(IE)]><!-->
<script src="assets/js/jquery.min.js"></script>
<!--<![endif]-->
<script src="assets/js/amazeui.min.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function(){
        //点击table的行
        $('.trigger-modal').click(function(){
          $('.menban').show();
          $("#mymodal").modal("toggle");
          console.log($(this)[0].id); 
        })
        $('.menban').click(function(){
          $('.menban').hide();
        })
        $("[name='close']").click(function(){
          $('.menban').hide();
        })
        $("#btn-receive").click(function(){
          $('.modal').hide();
          $('.menban').hide();
        })
        data = [{'id':7,'title':"30舍求取快递",'reward': "请吃饭",'valid_time':'2015-11-22下午06:00','status':0},{'id':8,'title':"yq去zjg求陪同",'reward': "无",'valid_time':'2015-11-25上午08:00','status':0},{'id':9,'title':"求约饭2",'reward': "无",'valid_time':'2015-11-24下午05:00','status':2},{'id':9,'title':"求约饭3",'reward': "无",'valid_time':'2015-11-25下午05:00','status':2},{'id':8,'title':"名人名家约饭",'reward': "无",'valid_time':'2015-11-22上午12:00','status':0},{'id':1,'title':"求约球1",'reward': "5元",'valid_time':'2015-11-24下午05:00','status':2},{'id':2,'title':"求约球2",'reward': "5元",'valid_time':'2015-11-24下午05:00','status':1},{'id':3,'title':"求约球3",'reward': "5元",'valid_time':'2015-11-24下午05:00','status':2},{'id':4,'title':"求约球4",'reward': "5元",'valid_time':'2015-11-24下午05:00','status':3}] 
        $('.search-condition input[name="radio1"]').click(function(){
            var value = $('.search-condition input[name="radio1"]:checked').val();
            var postData = {seeker_id: 1 , type1: "post" ,type2: value}
            console.log(value);
            var string="";
            var type2="";
            switch(value){
              case "0":
                type2="待接收";
                break;
              case "1":
                type2="失效";
                break;
              case "2":
                type2="已接收";
                break;
              case "3":
                type2="已完成";
                break;
              case "4":
                type2="失败";
                break;
              default:
                break;
            }
            for(var i = 0; i < data.length; i=i+1){
              if(data[i].status == parseInt(value)){
                string = string + "<tr><td>"+type2+"</td><td>"+data[i].title+"</td><td>"+data[i].reward+"</td><td><a href='#' class='trigger-modal' id="+data[i].id+">查看详情</a></td></tr>";
              }
            }
            string=" <table class='table table-striped'><thead><tr><th>任务状态</th><th>任务概述</th><th>任务悬赏</th><th>截止日期</th></tr></thead><tbody>"+string+"</tbody></thread></table>";
            $('#table_result').html(string);
        })
      });
    </script>
</body>
</html>
